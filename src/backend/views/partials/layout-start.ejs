<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title><%= title || 'Chat Bot Panel' %></title>
    <link rel="stylesheet" href="/vendor/tom-select/dist/css/tom-select.css" />
    <style>
      * { box-sizing: border-box; }
      body {
        margin: 0;
        font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
        background: #111827;
        color: #f9fafb;
      }
      .layout {
        display: flex;
        min-height: 100vh;
      }
      .sidebar {
        width: 220px;
        background: #020617;
        border-right: 1px solid #1f2937;
        padding: 16px 12px;
      }
      .sidebar h1 {
        font-size: 1.1rem;
        margin: 0 0 12px 4px;
      }
      .mode {
        font-size: 0.85rem;
        color: #9ca3af;
        margin: 0 0 16px 4px;
      }
      .nav {
        list-style: none;
        padding: 0;
        margin: 0;
      }
      .nav li {
        margin-bottom: 6px;
      }
      .nav a {
        display: block;
        padding: 8px 10px;
        border-radius: 6px;
        text-decoration: none;
        font-size: 0.9rem;
        color: #d1d5db;
      }
      .nav a:hover {
        background: #111827;
      }
      .nav a.active {
        background: #1d4ed8;
        color: #f9fafb;
      }
      .main {
        flex: 1;
        padding: 20px 24px;
      }
      .main h2 {
        margin-top: 0;
      }
      code {
        background: #111827;
        padding: 2px 4px;
        border-radius: 4px;
        font-size: 0.9em;
      }
      .ts-wrapper {
        width: 100%;
      }
      .ts-wrapper.single .ts-control {
        background: #0f172a !important;
        border: 1px solid #334155 !important;
        border-radius: 8px;
        color: #e5e7eb;
        padding: 6px 8px;
        min-height: 40px;
        box-shadow: none;
        display: flex;
        flex-wrap: wrap;
        align-items: center;
        gap: 6px 8px;
      }
      .ts-wrapper.single .ts-control input {
        color: #e5e7eb !important;
        font-size: 0.95rem;
        flex: 1 1 100%;
        min-width: 0;
        background: #111827;
        border: 1px solid #1f2937;
        border-radius: 6px;
        padding: 4px 6px;
      }
      .ts-wrapper.single .ts-control input::placeholder {
        color: #64748b;
      }
      .ts-wrapper.single .ts-control .item {
        color: #e5e7eb;
        font-size: 0.95rem;
        flex: 1 1 100%;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
      }
      .ts-dropdown {
        background: #0b1224;
        border: 1px solid #1f2937;
        border-radius: 8px;
        color: #e5e7eb;
      }
      .ts-dropdown .option {
        padding: 6px 10px;
        color: #e5e7eb;
      }
      .ts-dropdown .active {
        background: #1b2c4d;
        color: #e5e7eb;
      }
      .ts-dropdown .option:hover {
        background: #1b2c4d;
      }
    </style>
  </head>
  <body>
    <div class="layout">
      <aside class="sidebar">
        <h1>Chat Bot</h1>
        <p class="mode">Mode: <strong><%= mode || 'prod' %></strong></p>
        <% const isActive = (key) => (active === key ? 'active' : ''); %>
        <ul class="nav">
          <li><a href="/accounts" class="<%= isActive('accounts') %>">Accounts</a></li>
          <li><a href="/sandbox" class="<%= isActive('sandbox') %>">Command Sandbox</a></li>
          <li><a href="/auth" class="<%= isActive('auth') %>">Auth / Tokens</a></li>
        </ul>
      </aside>
      <main class="main">
